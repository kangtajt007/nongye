<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8"/>
    <title>广东省农业气象业务系统-农气服务</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="../css/bootstrap.css"/>
    <link rel="stylesheet" href="../css/font-awesome.css"/>
    <link rel="stylesheet" href="../css/datepicker.css"/>
    <link rel="stylesheet" href="../css/main.css"/>
    <!-- page specific plugin styles -->
    <!-- text fonts -->
    <link rel="stylesheet" href="../css/ace-fonts.css"/>
    <link rel="stylesheet" href="../css/ui.jqgrid.css"/>
    <!-- ace styles -->
    <link rel="stylesheet" href="../css/ace.css" class="ace-main-stylesheet" id="main-ace-style"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="../css/ace-part2.css" class="ace-main-stylesheet"/>
    <![endif]-->
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="../css/ace-ie.css"/>
    <![endif]-->
    <!--[if lte IE 8]>
    <script src="../js/html5shiv.js"></script>
    <script src="../js/respond.js"></script>
    <![endif]-->
</head>

<body class="no-skin" style="overflow-x: hidden;">
<!-- #section:basics/navbar.layout -->
<div id="navbar" class="navbar navbar-default">
    <script type="text/javascript">
        try {
            ace.settings.check('navbar', 'fixed')
        } catch (e) {
        }
    </script>

    <div class="navbar-container" id="navbar-container">
        <div class="navbar-header pull-left">
            <a href="#" class="navbar-brand">
                <small>
                    <i class="fa fa-leaf"></i>
                    广东省农业气象业务系统
                </small>
            </a>
        </div>

        <div class="navbar-buttons navbar-header" role="navigation">
            <div class="widget-toolbar no-border" style="margin-top: 5px;margin-left: 200px;">
                <ul class="nav nav-tabs tab-color-blue" id="recent-tab">
                    <li class="">
                        <a href="index.html">首页</a>
                    </li>
                    <li class="">
                        <a href="climateStatis.html">气候统计</a>
                    </li>
                    <li class="">
                        <a href="disasterWarning.html">灾害预警</a>
                    </li>
                    <li class="active">
                        <a href="agricMeteo.html">农气服务</a>
                    </li>
                    <li class="">
                        <a href="productionRelease.html">业务产品制作发布</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="main-container" id="main-container">
    <!-- /section:basics/sidebar -->
    <div class="main-content">
        <div class="page-content">
            <div class="row">
                <div class="col-sm-12">
                    <div class="well">
                        <button class="btn btn-app btn-purple btn-xs" click-target="#growth-container">
                            <i class="ace-icon fa fa-cloud-upload bigger-160"></i>
                            生育期
                        </button>
                        <button class="btn btn-app btn-pink btn-xs" click-target="#feature-agric">
                            <i class="ace-icon fa fa-share bigger-160"></i>
                            特色农业
                        </button>
                        <button class="btn btn-app btn-info btn-xs" click-target="#knowledge-base">
                            <i class="ace-icon fa fa-book bigger-160"></i>
                            知识库
                        </button>
                    </div>
                </div>
            </div>
            <div id="background-container" class="row sub-container">
                <span class="profile-picture">
                    <img class="img-responsive"
                          alt="首页背景图" src="../css/image/background.jpg"></img>
                </span>
            </div>
            <div id="growth-container" class="row sub-container form-inline hidden">
                <div class="widget-box widget-color-blue3">
                    <div class="widget-header">
                        <div class="widget-title">生育期</div>
                    </div>
                    <div class="widget-body">
                        <div class="widget-main">
                            <div class="row search-div">
                                <div class="col-sm-3" style="margin-left: 10px;">
                                    <div class="alert alert-success">
                                        <span class="badge badge-warning badge-left fly-badge">查询对象选择</span>
                                        <div class="control-group">
                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">早稻</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">晚稻</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">花生</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">甘薯</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">新植蔗</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">自然物候</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="alert alert-success">
                                        <span class="badge badge-warning badge-left fly-badge">统计功能选择</span>
                                        <div class="control-group">
                                            <div class="radio">
                                                <label>
                                                    <input name="statis-function-choice" type="radio" class="ace">
                                                    <span class="lbl">实时资料查询</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <div class="radio">
                                                <label>
                                                    <input name="statis-function-choice" type="radio" class="ace">
                                                    <span class="lbl">历史资料查询</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="alert alert-success">
                                        <span class="badge badge-warning badge-left fly-badge">实时查询起止日期</span>
                                        <div class="input-group input-group-sm">
                                            <input class="form-control date-picker" type="text" data-date-format="yyyy-MM-dd"/>
                                            <span class="input-group-addon">
                                                <i class="fa fa-calendar bigger-110"></i>
                                            </span>
                                        </div>
                                        <div class="input-group input-group-sm">
                                            <input class="form-control date-picker" type="text" data-date-format="yyyy-MM-dd"/>
                                <span class="input-group-addon">
                                    <i class="fa fa-calendar bigger-110"></i>
                                </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="alert alert-success">
                                        <span class="badge badge-warning badge-left fly-badge">历史查询起止年份</span>
                                        <div class="input-group input-group-sm">
                                            <input class="form-control date-picker" type="text" data-date-format="yyyy-MM-dd"/>
                                <span class="input-group-addon">
                                    <i class="fa fa-calendar bigger-110"></i>
                                </span>
                                        </div>
                                        <div class="input-group input-group-sm">
                                            <input class="form-control date-picker" type="text" data-date-format="yyyy-MM-dd"/>
                                <span class="input-group-addon">
                                    <i class="fa fa-calendar bigger-110"></i>
                                </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="function-div pull-right" style="margin-right: 20px;">
                                    <div>
                                        <label>
                                            <input name="switch-field-1" class="ace ace-switch ace-switch-2" type="checkbox">
                                            <span class="lbl"> 输出经纬度</span>
                                        </label>
                                    </div>
                                    <div class="btn-group btn-corner" style="margin-top: 15px;">
                                        <button class="btn btn-sm btn-success fa fa-search">
                                            数据查询
                                        </button>
                                        <button class="btn btn-sm btn-info btn-default fa fa-map-marker">
                                            等值线图
                                        </button>
                                        <button class="btn btn-sm btn-pink fa fa-file-o">
                                            保存结果
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <table id="growth-table"></table>
                                <div id="growthGridPager"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="feature-agric" class="row sub-container form-inline hidden">
                <div class="widget-box widget-color-blue3">
                    <div class="widget-header">
                        <div class="widget-title">特色农业</div>
                    </div>
                    <div class="widget-body">
                        <div class="widget-main">
                            <div class="row search-div">
                                <div class="col-sm-2">
                                    <div class="alert alert-success" style="height:89px;">
                                        <span class="badge badge-warning badge-left fly-badge">参数设置</span>
                                        <div class="input-group" style="margin-top: 15px;">
                                            <input readonly="" type="text" class="form-control" value="">
                                            <span class="input-group-addon pointer tooltip-success"
                                                  data-placement="bottom" title="打开参数设置界面" id="params-setting">
                                                <i class="ace-icon fa fa-asterisk"></i>
                                            </span>
                                        </div>
                                        <div id="params-setting-div" class="hidden">
                                            <div class="well">
                                                <div class="radio-inline">
                                                    <label>
                                                        <input name="display-type-radio" type="radio" class="ace" checked="checked">
                                                        <span class="lbl">方案一</span>
                                                    </label>
                                                </div>
                                                <div class="radio-inline">
                                                    <label>
                                                        <input name="display-type-radio" type="radio" class="ace" checked="checked">
                                                        <span class="lbl">方案二</span>
                                                    </label>
                                                </div>
                                                <div class="radio-inline">
                                                    <label>
                                                        <input name="display-type-radio" type="radio" class="ace" checked="checked">
                                                        <span class="lbl">方案三</span>
                                                    </label>
                                                </div>
                                                <span>
                                                    作物名称:
                                                    <input type="text"/>
                                                </span>
                                            </div>
                                            <table class="table table-bordered">
                                                <tr class="align-center">
                                                    <th width="60"></th>
                                                    <th class="align-center">下限值</th>
                                                    <th class="align-center">最适值</th>
                                                    <th class="align-center">上限值</th>
                                                    <th class="align-center">权重</th>
                                                </tr>
                                                <tr>
                                                    <th>旬光照</th>
                                                    <td><input type="text" class="col-xs-9" value="80"/> </td>
                                                    <td><input type="text" class="col-xs-9" value="50"/></td>
                                                    <td><input type="text" class="col-xs-9" value="70"/></td>
                                                    <td><input type="text" class="col-xs-9" value="0.50"/></td>
                                                </tr>
                                                <tr>
                                                    <th>旬积温</th>
                                                    <td><input type="text" class="col-xs-9" value="200"/> </td>
                                                    <td><input type="text" class="col-xs-9" value="290"/></td>
                                                    <td><input type="text" class="col-xs-9" value="400"/></td>
                                                    <td><input type="text" class="col-xs-9" value="0.00"/></td>
                                                </tr>
                                                <tr>
                                                    <th>旬雨量</th>
                                                    <td><input type="text" class="col-xs-9" value="30"/> </td>
                                                    <td><input type="text" class="col-xs-9" value="100"/></td>
                                                    <td><input type="text" class="col-xs-9" value="250"/></td>
                                                    <td><input type="text" class="col-xs-9" value="0.50"/></td>
                                                </tr>
                                            </table>

                                            <table class="table">
                                                <tr class="align-center">
                                                    <th></th>
                                                    <th>不适宜</th>
                                                    <th>次适宜</th>
                                                    <th>适宜</th>
                                                    <th>非常适宜</th>
                                                </tr>
                                                <tr>
                                                    <td><input type="text" class="col-xs-9 pull-right" value="0.00"/> </td>
                                                    <td><input type="text" class="col-xs-9 pull-right" value="0.30"/> </td>
                                                    <td><input type="text" class="col-xs-9 pull-right" value="0.50"/></td>
                                                    <td><input type="text" class="col-xs-9 pull-right" value="0.80"/></td>
                                                    <td><input type="text" class="col-xs-9 pull-right" value="1.00"/></td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="alert alert-success">
                                        <span class="badge badge-warning badge-left fly-badge">起止日期</span>
                                        <div class="input-group input-group-sm">
                                            <input class="form-control date-picker" type="text" data-date-format="yyyy-MM-dd"/>
                                            <span class="input-group-addon">
                                                <i class="fa fa-calendar bigger-110"></i>
                                            </span>
                                        </div>
                                        <div class="input-group input-group-sm">
                                            <input class="form-control date-picker" type="text" data-date-format="yyyy-MM-dd"/>
                                            <span class="input-group-addon">
                                                <i class="fa fa-calendar bigger-110"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="alert alert-success" style="height:89px;">
                                        <span class="badge badge-warning badge-left fly-badge">结果显示方式</span>
                                        <div class="input-group input-group-sm" style="margin:15px;">
                                            <div class="radio">
                                                <label>
                                                    <input name="display-type-radio" type="radio" class="ace" checked="checked">
                                                    <span class="lbl">等级</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="input-group input-group-sm">
                                            <div class="radio">
                                                <label>
                                                    <input name="display-type-radio" type="radio" class="ace">
                                                    <span class="lbl">数值</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="alert alert-success" style="height:89px;">
                                        <span class="badge badge-warning badge-left fly-badge">适宜度等级</span>
                                        <div style="margin: 8px 0 5px 0px;">
                                            <span class="badge badge-danger">不适宜</span>
                                            <span class="badge badge-warning">次适宜</span>
                                        </div>
                                        <div>
                                            <span class="badge badge-info">适宜</span>
                                            <span class="badge badge-success">非常适宜</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-3 function-div">
                                    <div>
                                        <label>
                                            <input name="switch-field-1" class="ace ace-switch ace-switch-2" type="checkbox">
                                            <span class="lbl"> 输出经纬度</span>
                                        </label>
                                    </div>
                                    <button class="btn btn-white btn-default btn-round">
                                        <i class="ace-icon fa fa-search blue"></i>
                                        数据查询
                                    </button>
                                    <button class="btn btn-white btn-default btn-round">
                                        <i class="ace-icon fa fa-map-marker green"></i>
                                        等值线图
                                    </button>
                                    <button class="btn btn-white btn-default btn-round">
                                        <i class="ace-icon fa fa-file-o red2"></i>
                                        保存结果
                                    </button>
                                </div>
                            </div>
                            <div class="row">
                                <table id="feature-table"></table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="knowledge-base" class="row sub-container form-inline hidden">
                <div class="row">
                    <div class="col-xs-9">
                        <iframe id="iframe" src="knowledge/k1.html" style="border: 0;margin-left:10px;" width="100%" height="100%"
                                frameborder="no" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="yes"></iframe>
                    </div>
                    <div class="col-xs-3">
                        <span class="input-icon">
                            <input type="text" placeholder="文章标题、内容" class="nav-search-input" autocomplete="off">
                            <i class="ace-icon fa fa-search nav-search-icon"></i>
                            <button class="btn btn-info2 btn-round">
                                搜索
                            </button>
                        </span>
                        <div class="widget-box">
                            <div class="widget-header widget-header-flat">
                                <h4 class="widget-title">知识分类</h4>
                            </div>
                            <div class="widget-body">
                                <div class="widget-main">
                                    <span class="label label-pink arrowed-right pointer">农业气象灾害指标</span>
                                    <span class="label label-info arrowed-right pointer">农业气象灾害防御措施</span>
                                    <span class="label label-success arrowed-right pointer">农业气象科普知识</span>
                                    <span class="label label-light arrowed-right pointer">作物与气象</span>
                                    <span class="label label-purple arrowed-right pointer">标准规范</span>
                                </div>
                            </div>
                        </div>
                        <div class="widget-box">
                            <div class="widget-header widget-header-flat">
                                <h4 class="widget-title">文章列表</h4>
                            </div>
                            <div class="widget-body">
                                <div class="widget-main">
                                    <ul class="list-unstyled">
                                        <li><a href="#">【最新】广东省农业气象灾害指标体系及保险费率研究</a></li>
                                        <li><a href="#">【推荐】中国南方地区几种农业气象灾害指标研究综述</a></li>
                                        <li><a href="#">【精品】广东省近三十年持续性农业气象灾害指标时空分布特征</a></li>
                                        <li><a href="#">【推荐】气象条件与农作物病虫害预报和防治</a></li>
                                        <li><a href="#">【分享】作物冠层微气象仪器研制与应用</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--[if !IE]> -->
<script type="text/javascript">
    window.jQuery || document.write("<script src='../js/jquery.js'>" + "<" + "/script>");
</script>
<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
    window.jQuery || document.write("<script src='../js/jquery1x.js'>" + "<" + "/script>");
</script>
<![endif]-->
<script type="text/javascript">
    if ('ontouchstart' in document.documentElement) document.write("<script src='../js/jquery.mobile.custom.js'>" + "<" + "/script>");
</script>
<script src="../js/bootstrap.js"></script>
<!-- page specific plugin scripts -->
<!-- ace scripts -->
<script src="../js/ace/elements.scroller.js"></script>
<script src="../js/ace/elements.colorpicker.js"></script>
<script src="../js/ace/elements.fileinput.js"></script>
<script src="../js/ace/elements.typeahead.js"></script>
<script src="../js/ace/elements.wysiwyg.js"></script>
<script src="../js/ace/elements.spinner.js"></script>
<script src="../js/ace/elements.treeview.js"></script>
<script src="../js/ace/elements.wizard.js"></script>
<script src="../js/ace/elements.aside.js"></script>
<script src="../js/ace/ace.js"></script>
<script src="../js/ace/ace.ajax-content.js"></script>
<script src="../js/ace/ace.touch-drag.js"></script>
<script src="../js/ace/ace.sidebar.js"></script>
<script src="../js/ace/ace.sidebar-scroll-1.js"></script>
<script src="../js/ace/ace.submenu-hover.js"></script>
<script src="../js/ace/ace.widget-box.js"></script>
<script src="../js/ace/ace.settings.js"></script>
<script src="../js/ace/ace.settings-rtl.js"></script>
<script src="../js/ace/ace.settings-skin.js"></script>
<script src="../js/ace/ace.widget-on-reload.js"></script>
<script src="../js/ace/ace.searchbox-autocomplete.js"></script>

<script src="../js/bootstrap-datepicker.js"></script>
<script src="../js/jqGrid/jquery.jqGrid.src.js"></script>
<script src="../js/jqGrid/i18n/grid.locale-cn.js"></script>
<script src="../js/bootbox.js"></script>
<script>
    $(function () {
        $("#iframe").height(1024);

        $(".date-picker").datepicker({
            autoclose: true,
            todayHighlight: true
        });

        $(".tooltip-success").tooltip();

        $("#params-setting").click(function(){
            bootbox.dialog({
                title:'参数设置',
                message:$("#params-setting-div").html(),
                locale:'zh_CN',
                buttons:{
                    cancel:{
                        label:"取消",
                        callback:function(){}
                    },
                    ok:{
                        label:"确认",
                        callback:function(){
                        }
                    }
                }
            });
        });

        $("button.btn-app").click(function(){
            var me = $(this), target = me.attr("click-target");
            $("div.sub-container").hide();
            $(target).removeClass("hidden").show();
            initGrowthTable();
            initFeatureTable();
        });
    });

    //初始化生育期表格
    function initGrowthTable(){
        //resize to fit page size
        $(window).on('resize.jqGrid', function () {
            $("#growth-table").jqGrid('setGridWidth', $(".search-div").width()-20);
        });

        var url = "../json/agric/growth.json";

        $("#growth-table").jqGrid(
        {
            url:url,
            mtype:'GET',
            datatype:'json',
            width: 850,
            height:"auto",
            columnsresize: true,
            rownumbers: true,
            colModel: [
                {name: 'siteNo', label: '站号', width: 70,sortable:false,align: "center"},
                {name: 'siteName', label: '站名', width: 80,sortable:false,align: "center"},
                {name: 'growthDate', label: '发育期', width: 70,sortable:false,align: "center"},
                {name: 'distanceAvg', label: '距平', width: 70,sortable:false,align: "center"},
                {name: 'growthSituation', label: '生长情况', width: 70,sortable:false,align: "center"},
                {name: 'observeDate', label: '观测日期', width: 100,sortable:false,align: "center"}
            ],
            altRows: true,
            rowNum:10,
            pager: "#growthGridPager"
        });
    }

    //初始化特色农业表格
    function initFeatureTable(){
        //resize to fit page size
        $(window).on('resize.jqGrid', function () {
            var t = $("#feature-table");
            t.jqGrid('setGridWidth', t.parents(".widget-body").width());
        })

        var grid_data = [],
                colNames = ["站号","站名","日照适宜度","气温适宜度","降水适宜度","综合适宜度"],
                colModels = [];

        for(var i=0;i<10;i++){
            var obj = {
                siteNo:57989+i,
                siteName:"仁化",
                growthDate:'-9999',
                distanceAvg:'-9999',
                growthSituation:'-9999',
                observeDate:'2015年9月14日'
            };
            grid_data.push(obj);
        }

        colModels.push({name: 'siteNo', index: 'siteNo', width: 70});
        colModels.push({name: 'siteName', index: 'siteName', width: 80});
        colModels.push({name: 'growthDate', index: 'growthDate', width: 70});
        colModels.push({name: 'distanceAvg', index: 'distanceAvg', width: 70});
        colModels.push({name: 'growthSituation', index: 'growthSituation', width: 70});
        colModels.push({name: 'observeDate', index: 'observeDate', width: 100});

        $("#feature-table").jqGrid({
            data: grid_data,
            datatype: "local",
            height: 250,
            colNames: colNames,
            colModel: colModels,
            shrinkToFit: colModels.length > 10 ? false : true,
            altRows: true,
            rownumbers: true,
            loadComplete: function () {
                var table = this;
            }
        });
        $(window).triggerHandler('resize.jqGrid');//trigger window resize to make the grid get the correct size
    }
</script>
</body>
</html>