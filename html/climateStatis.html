<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8"/>
    <title>广东省农业气象业务系统-气候统计</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="../css/bootstrap.css"/>
    <link rel="stylesheet" href="../css/font-awesome.css"/>
    <link rel="stylesheet" href="../css/main.css"/>
    <!-- page specific plugin styles -->
    <!-- text fonts -->
    <link rel="stylesheet" href="../css/ace-fonts.css"/>
    <link rel="stylesheet" href="../css/ui.jqgrid.css"/>
    <link rel="stylesheet" href="../css/datepicker.css"/>

    <link rel="stylesheet" href="../css/daterangepicker.css"/>
    <link rel="stylesheet" href="../css/bootstrap-datetimepicker.css"/>

    <!-- ace styles -->
    <link rel="stylesheet" href="../css/ace.css" class="ace-main-stylesheet" id="main-ace-style"/>
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="../css/ace-part2.css" class="ace-main-stylesheet"/>
    <![endif]-->
    <!--[if lte IE 9]>
    <link rel="stylesheet" href="../css/ace-ie.css"/>
    <![endif]-->
    <!--[if lte IE 8]>
    <script src="../js/html5shiv.js"></script>
    <script src="../js/respond.js"></script>
    <![endif]-->
    <style type="text/css">
        .tables-wrapper .row:first-child {
            background-color: #EFF3F8;
        }

        .tables-wrapper .row {
            margin: 0 !important;
        }
    </style>
</head>

<body class="no-skin">
<!-- #section:basics/navbar.layout -->
<div id="navbar" class="navbar navbar-default">
    <script type="text/javascript">
        try {
            ace.settings.check('navbar', 'fixed')
        } catch (e) {
        }
    </script>

    <div class="navbar-container" id="navbar-container">
        <div class="navbar-header pull-left">
            <a href="#" class="navbar-brand">
                <small>
                    <i class="fa fa-leaf"></i>
                    广东省农业气象业务系统
                </small>
            </a>
        </div>

        <div class="navbar-buttons navbar-header" role="navigation">
            <div class="widget-toolbar no-border" style="margin-top: 5px;margin-left: 200px;">
                <ul class="nav nav-tabs tab-color-blue" id="recent-tab">
                    <li class="">
                        <a href="index.html">首页</a>
                    </li>
                    <li class="active">
                        <a href="climateStatis.html">气候统计</a>
                    </li>
                    <li class="">
                        <a href="disasterWarning.html">灾害预警</a>
                    </li>
                    <li class="">
                        <a href="agricMeteo.html">农气服务</a>
                    </li>
                    <li class="">
                        <a href="productionRelease.html">业务产品制作发布</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="main-container" id="main-container">
    <!-- /section:basics/sidebar -->
    <div class="main-content">
        <div class="page-content">
            <div class="row">
                <div class="col-sm-12">
                    <div class="well">
                        <button class="btn btn-app btn-grey btn-xs" click-target="#background-container">
                            <i class="ace-icon fa fa-home bigger-160"></i>
                            首页
                        </button>
                        <button class="btn btn-app btn-purple btn-xs" click-target="#day-container">
                            <i class="ace-icon fa fa-cloud-upload bigger-160"></i>
                            逐日资料
                        </button>
                        <button class="btn btn-app btn-pink btn-xs" click-target="#background-container">
                            <i class="ace-icon fa fa-share bigger-160"></i>
                            逐月资料
                        </button>
                        <button class="btn btn-app btn-info btn-xs" click-target="#background-container">
                            <i class="ace-icon fa fa-book bigger-160"></i>
                            任意时段
                        </button>
                        <button class="btn btn-app btn-info btn-xs" click-target="#background-container">
                            <i class="ace-icon fa fa-book bigger-160"></i>
                            任意时段逐年
                        </button>
                    </div>
                </div>
            </div>
            <div id="background-container" class="row sub-container">
                <span class="profile-picture">
                    <img class="img-responsive"
                         alt="首页背景图" src="../css/image/background.jpg"></img>
                </span>
            </div>
            <div id="day-container" class="row sub-container form-inline hidden">
                <div class="widget-box widget-color-blue3">
                    <div class="widget-header">
                        <div class="widget-title">逐日资料</div>
                    </div>
                    <div class="widget-body">
                        <div class="widget-main">
                            <div class="row search-div">
                                <div class="col-sm-5">
                                    <div class="alert alert-success">
                                        <span class="badge badge-warning badge-left fly-badge">要素选择</span>
                                        <div class="control-group">
                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">平均气温</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">日照指数</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">相对湿度</span>
                                                </label>
                                            </div>
                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">平均地温</span>
                                                </label>
                                            </div>
                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">最高地温</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">最高气温</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">20时雨量</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">极大风速</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">平均气压</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">平均能见度</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">最低气温</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">08时雨量</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">最大风速</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">最低气压</span>
                                                </label>
                                            </div>

                                            <div class="radio">
                                                <label>
                                                    <input name="form-field-radio" type="radio" class="ace">
                                                    <span class="lbl">最低能见度</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="alert alert-success">
                                        <span class="badge badge-warning badge-left fly-badge">起止日期</span>
                                        <div class="input-group input-group-sm">
                                            <input class="form-control date-picker" type="text" data-date-format="yyyy-MM-dd"/>
                                            <span class="input-group-addon">
                                                <i class="fa fa-calendar bigger-110"></i>
                                            </span>
                                        </div>
                                        <div class="input-group input-group-sm" style="margin-top:32px;">
                                            <input class="form-control date-picker" type="text" data-date-format="yyyy-MM-dd"/>
                                            <span class="input-group-addon">
                                                <i class="fa fa-calendar bigger-110"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="alert alert-success">
                                        <span class="badge badge-warning badge-left fly-badge">条件查询</span>
                                        <div class="control-group input-group input-group-sm">
                                            ≥ <input class="form-control" type="text"/>
                                        </div>
                                        <div class="control-group input-group input-group-sm">
                                            ≤ <input class="form-control " type="text" style="height: 30px;"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-3 function-div">
                                    <div>
                                        <label>
                                            <input name="switch-field-1" class="ace ace-switch ace-switch-2" type="checkbox">
                                            <span class="lbl"> 输出经纬度</span>
                                        </label>
                                    </div>
                                    <button class="btn btn-white btn-default btn-round">
                                        <i class="ace-icon fa fa-search blue"></i>
                                        数据查询
                                    </button>
                                    <button class="btn btn-white btn-default btn-round">
                                        <i class="ace-icon fa fa-map-marker green"></i>
                                        等值线图
                                    </button>
                                    <button class="btn btn-white btn-default btn-round">
                                        <i class="ace-icon fa fa-file-o red2"></i>
                                        保存结果
                                    </button>
                                </div>
                            </div>
                            <div class="row">
                                <table id="grid-table"></table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<!--[if !IE]> -->
<script type="text/javascript">
    window.jQuery || document.write("<script src='../js/jquery.js'>" + "<" + "/script>");
</script>
<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
    window.jQuery || document.write("<script src='../js/jquery1x.js'>" + "<" + "/script>");
</script>
<![endif]-->
<script type="text/javascript">
    if ('ontouchstart' in document.documentElement) document.write("<script src='../js/jquery.mobile.custom.js'>" + "<" + "/script>");
</script>
<script src="../js/bootstrap.js"></script>
<!-- page specific plugin scripts -->

<!-- ace scripts -->
<script src="../js/ace/elements.scroller.js"></script>
<script src="../js/ace/elements.colorpicker.js"></script>
<script src="../js/ace/elements.fileinput.js"></script>
<script src="../js/ace/elements.typeahead.js"></script>
<script src="../js/ace/elements.wysiwyg.js"></script>
<script src="../js/ace/elements.spinner.js"></script>
<script src="../js/ace/elements.treeview.js"></script>
<script src="../js/ace/elements.wizard.js"></script>
<script src="../js/ace/elements.aside.js"></script>
<script src="../js/ace/ace.js"></script>
<script src="../js/ace/ace.ajax-content.js"></script>
<script src="../js/ace/ace.touch-drag.js"></script>
<script src="../js/ace/ace.sidebar.js"></script>
<script src="../js/ace/ace.sidebar-scroll-1.js"></script>
<script src="../js/ace/ace.submenu-hover.js"></script>
<script src="../js/ace/ace.widget-box.js"></script>
<script src="../js/ace/ace.settings.js"></script>
<script src="../js/ace/ace.settings-rtl.js"></script>
<script src="../js/ace/ace.settings-skin.js"></script>
<script src="../js/ace/ace.widget-on-reload.js"></script>
<script src="../js/ace/ace.searchbox-autocomplete.js"></script>
<script src="../js/date-time/moment.js"></script>
<script src="../js/date-time/daterangepicker.js"></script>

<script src="../js/jqGrid/jquery.jqGrid.src.js"></script>
<script src="../js/jqGrid/i18n/grid.locale-en.js"></script>
<script>
    $(function () {
        //二级菜单切换
        $("button.btn-app").click(function(){
            var me = $(this), target = me.attr("click-target");
            $("div.sub-container").hide();
            $(target).removeClass("hidden").show();
            initDayResourceTable();
        });
    });

    //初始化逐日资料表格
    function initDayResourceTable(){
        var grid_selector = "#grid-table";
        var pager_selector = "#grid-pager";

        //resize to fit page size
        $(window).on('resize.jqGrid', function () {
            $(grid_selector).jqGrid('setGridWidth', $(".search-div").width());
        })

        var now = moment("2015-01-01");
        var then = moment("2015-02-05");
        var days = then.diff(now) / 86400000;
        var dayAry = [];
        dayAry.push(now.format("MM-DD"));
        for (var i = 0; i < days; i++) {
            var c = now.add(1, 'd');
            dayAry.push(c.format("MM-DD"));
        }
        var grid_data = [];

        for (var j = 0; j < days + 1; j++) {
            var obj = {};
            obj.siteNo = "57988";
            obj.siteName = "乐昌";
            obj.avg = "-9999";
            obj.max = "-9999";
            obj.min = "-9999";
            for (var i = 0; i < days + 1; i++) {
                var c = dayAry[i];
                obj[c] = "-9999";
            }
            grid_data.push(obj)
        }

        var colNames = ['站号', '站名'];
        for (var i = 0; i < days + 1; i++) {
            colNames.push(dayAry[i]);
        }
        colNames.push('平均值');
        colNames.push('最小值');
        colNames.push('最大值');

        var colModels = [
            {name: 'siteNo', index: 'siteNo', width: 60},
            {name: 'siteName', index: 'siteName', width: 90}
        ];
        for (var i = 0; i < days + 1; i++) {
            var c = dayAry[i];
            colModels.push({name: c, index: c, width: 70});
        }
        colModels.push({name: 'avg', index: 'avg', width: 50});
        colModels.push({name: 'max', index: 'max', width: 50});
        colModels.push({name: 'min', index: 'max', width: 50});

        jQuery(grid_selector).jqGrid({
            data: grid_data,
            datatype: "local",
            height: 220,
            colNames: colNames,
            colModel: colModels,
            shrinkToFit: colModels.length > 10 ? false : true,
            altRows: true,
            //toppager: true,
            rownumbers: true,

            loadComplete: function () {
                var table = this;
            }

        });
        $(window).triggerHandler('resize.jqGrid');//trigger window resize to make the grid get the correct size
    }
</script>
</body>
</html>